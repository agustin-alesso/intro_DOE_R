# Empezando con R y RStudio

## ¿Qué es R y RStudio?

```{r, echo = F, message=F}
require(knitr)
```

R es un lenguaje y entorno para el procesamiento, visualización y análisis estadístico de datos. Ha sido creado en 1993 por R. Gentleman y R. Ihaka, ambos científicos del Departamento de Estadística de la Universidad de Auckland (Nueva Zelanda). Actualmente su desarrollo y mantenimiento está a cargo del _R Core Team_. El sitio oficial del proyecto es [www.r-project.org](www.r-project.org)

```{r, echo = F, fig.cap = 'Página oficial de R Project', out.width = '75%', fig.align = 'center', fig.pos= 'h', out.extra=''} 
include_graphics('images/rproject.png', auto_pdf = T)
```

Hoy en día, R es la _lingua franca_ del procesamiento y análisis estadístico de datos, tanto en el ámbito académico como comercial dado que es gratiuto, multiplataforma, de código abierto (_open source_, liberado con licencia GNU/GPL).  Esto lo convierte en un software muy potente y que expresa el estado del arte de los métodos estadísticos ya que la comunidad de usuarios contribuya constantemente con funcionalidades e implementaciones de nuevos métodos y técnicas estadísticas.

Al igual que su antecesor S, la flexibilidad y potencia de R se basa en su interfaz de comandos (CLI, del inglés _command line interface_ ) que permite la ejecución de comandos de manera interactiva (en consola) o automática mediante scritps. 

```{r, echo = F, fig.cap = 'Consola o terminal de Windows, Mac OS X y Linux corriendo la última versión estable de R', out.width = '75%', fig.align = 'center', fig.pos= 'h', out.extra=''} 
include_graphics(c('images/consola_linux.png', 'images/consola_windows.png'), auto_pdf = T)
```

Existen algunos desarrollos de interfases gráficas (GUIs, del inglés _graphical user interface_), e.g. RCommander, Deducer, que ofrecen la posibilidad de, mediante menues y botones, ejecutar análisis relativamente simples minimizando la necesidad de escribir código. 

```{r, echo = F, fig.cap = 'Interfase de R Commander', out.width = '75%', fig.align = 'center', fig.pos= 'h', out.extra=''} 
include_graphics('images/RcmdrBASE.png', auto_pdf = T)
```

Por su parte, los entornos de desarrollo integrados (IDE por sus siglas en inglés _integrated development environments_) ofrecen un enfoque intermedio con menúes o funciones asistentes que facilitan algunas tareas generales (abrir archivos, carga de datos, exportar gráficos y resultados) pero dejando la codificación del análisis estadístico en manos del usuario mediante la ejecución de scripts. Entre estas alternativas se destaca RStudio ( [www.rstudio.com](www.rstudio.com) ) el cual también es de código abierto (licencia GNU/GPL), multiplataforma y ofrece una versión gratuita.

```{r, echo = F, fig.cap = 'Interfase de RStudio', out.width = '75%', fig.align = 'center', fig.pos= 'h', out.extra=''} 
include_graphics('images/RStudio.png', auto_pdf = T)
```

## ¿Cómo instalar R y RStudio?

RStudio requiere que el sistema tenga al menos una versión de R instalada. Ambos softwares son multiplataforma y pueden ser ejecutados en sistemas operativos Windows, OS X  y Linux. A continuación se describe el procedimiento para instalar R y RStudio bajo Windows.

### Instalación de R

1) Descargar el archivo instalador correspondiente a la última versión estable de R desde el CRAN[^1] (del inglés, _Comprenhensive R Archive Network_) visitando el siguiente [link](https://cloud.r-project.org/bin/windows/base/release.htm) [^2]. 

```{r, echo = F, fig.cap = 'Página de descaga de R', out.width = '75%', fig.align = 'center', fig.pos= 'h', out.extra=''} 
include_graphics('images/choose_OS.png', auto_pdf = T)
```

[^1]: CRAN se compone de un conjunto de servidores espejo distribuidos alrededor del mundo que tienen copias de R y sus paquetes. No es necesario escojer el espejo más cercano ya que el espejo nube (https://cloud.r-project.org) automáticamente determina de que servidor conviene realizar la descarga.

[^2]: Al momento de escribir estas instrucciones la última versión estable de R era la 3.5.1 "Feather Spray", por lo tanto el link apuntará al archivo `R-3.5.1-win.exe`. 

2) Una vez finalizada la descarga ejecutar el archivo `.exe` y seguir el asistente de instalación con todas las opciones por defecto. 

   Si la instalación ha sido exitosa el el menú _Inicio > Todos los Programas > R_ se encontrarán dos accesos directos `R i386 3.5.1` y `R x64 3.5.1` los cuales permiten correre la interfase de usuario mínima que viene con la versión de R para Windows.

```{r, echo = F, fig.cap = 'R GUI para Windows', out.width = '75%', fig.align = 'center', fig.pos= 'h', out.extra=''} 
include_graphics('images/rgui.png', auto_pdf = T)
```

### Instalación de RStudio

1) Ir al sitio web de descarga de RStudio: [https://www.rstudio.com/products/rstudio/download/](https://www.rstudio.com/products/rstudio/download/)

```{r, echo = F, out.width = "75%", fig.align = 'center', fig.cap = 'Página principal de RStudio', fig.pos= 'h', out.extra=''}
knitr::include_graphics("images/rstudio_download.png", auto_pdf = T)
```

2) Descargar el archivo de instalación correspondiente a nuestra plataforma o sistema operativo. Por ejemplo: para Windows iniciará la descarga del archivo `RStudio-1.1.453.exe`

```{r, echo = F, out.width = "75%", fig.align = 'center', fig.cap = 'Página principal de RStudio', fig.pos= 'h', out.extra=''}
knitr::include_graphics("images/rstudio_download_OS.png", auto_pdf = T)
```

3) Una vez finalizada la descarga ejecutar el archivo `.exe` [^3] `RStudio-1.1.453.exe` y seguir el asistente de instalación con todas las opciones por defecto.

[^3]: Al momento de escribir estas instrucciones la última versión estable de RStudio era la 1.1.453 por lo tanto el link apuntará al archivo `RStudio-1.1.453.exe`. 

   Si la instalación ha sido exitosa el el menú _Inicio > Todos los Programas > RStudio_ se encontrará el acceso directo a RStudio el cual, mediante el menu contextual (botón derecho del ratón) puede enviarse al Escritorio como acceso directo o bien anclar al menu de Inicio o barra de acceso rápido.
   

Ahora sí, ya tenemos listo R y RStudio para empezar a trabajar!!

## Primera sesión en RStudio

El entorno de trabajo de RStudio se divide en cuatro paneles: (1) el editor, (2) la consola, (3) entorno, historia de comandos y conexiones y (4) administrador de archivos, gráficos, ayuda y paquetes.

```{r, echo = F, out.width = "75%", fig.align = 'center', fig.cap = 'Interfase principal de RStudio', fig.pos= 'h', out.extra=''}
include_graphics("images/RStudio_paneles.png", auto_pdf = T)
```

1. **Editor de scripts**. Por defecto este panel no aparece a menos que se cree un nuevo script o se abra uno previamente guardado. Es básicamente un editor de texto plano como el block de notas, aunque tiene algunas funcionalidades importantes: 
     - Resaltado sintaxis: mediante colores resalta las funciones, variables, comandos o palabras claves del lenguaje **R**
     - Sangrado automático: agrega espacios en blanco para mantener la sangría de los bloques de código.
     - Completado automático: muestra sugerencias para completar el comando o argumentos usando la tecla `TAB`.
     
2. **Consola**. Es donde reside **R** propiamente dicho. Allí se ejecutan los comandos y se obtienen las salidas de **R**. El símbolo es `>` indica que **R** está disponible para recibir un comando que ouede ser tipeado directamente, o bien enviado desde el editor de scripts usando la combinación `CTRL + ENTER` o `CTRL + R`.

3. **Environmnet/History**. En la primera pestaña se visualizan los objetos (variables, funciones o datos cargados) en el entorno de **R**. En la segunda se puede ver el historial de comandos ingresados o enviados a la consola

4. **Files/Plots/Packages/Help/Viewer**. Allí se puede manejar los archivos del directorio de trabajo, visualizar los gráficos generados en **R** con posibilidad de exportarlos en varios formatos, administrar los paquetes o complementos, buscar o explorar el manual de ayuda.

### Crear un Proyecto

Antes de comenzar es conveniente crear un proyecto dentro de **RStudio**. Esto permitirá organizar los archivos de datos, las salidas, los scripts, etc., dentro de un directorio de trabajo (_working directory_) y volver a ellos de manera más rápida y eficiente.

1. Ir a `File > New project... ` o bien el ícono `New project`.

2. Luego seleccionar `New directory` y `Empty project`

3. Una vez en el cuadro de diálogo `Create new project`

En `Directory name` ingresar el nombre del proyecto (e.g. `Diseño2016`) que será a su vez el nombre de la carpeta que **RStudio** va a crear. 

Luego en `Create project as a subdirectory of` vamos indicar **donde** queremos que **Rstudio** cree la carpeta.  

4. Si todo sale bien, se crea la carpeta con el nombre que indicamos y dentro de ésta un archivo con extensión `.Rproj`

### Modo interactivo: la consola

La línea de comando o **consola** es el modo interactivo mediante el cual podemos ejecutar comandos directamente en el intérprete de **R**. El símbolo `>` indica que **R** está disponible esperando una orden. Si la orden no está completa el símbolo se transoforma en `+`. Por ejemplo: `2 + 2`

```{r}
2 + 2
```

Otro ejemplo: el promedio de los números `1`, `3` y `4`

```{r}
(1 + 3 + 4) / 3
```

El simbolo `#` indica que lo que sigue es un comentario y por lo tanto debe ignorarse

```{r}
# Esto es un comentario
```

### Creación de un script

El **Editor de Scripts** (panel 1) es un editor de texto que está conectado con la **consola** y gracias a algunas funcionalidades facilitan la edición de código

Para crear un nuevo script se puede usar uno de los siguientes métodos:

- Ir a al menu `File > New File > R Script`
- Usar el atajo de teclado `CTRL + SHIFT + N`
- Clickear en el primer ícono de la barra de menu

![](images/menu_bar.png)


Una vez abierto el script en blanco, se pueden empezar a escribir los comandos de **R**, por ejemplo:

```{r, eval = F}
# Crear un vector con 10 números aleatorios
x <- runif(10, min = 0, max = 10)

# Calcular el promedio de estos números
mean(x)
```

Para ejecutar estos comandos en la consola hay que posicionarse en la línea o seleccionar las líneas que se quieren ejecutar y luego:

- Ir al menu `Code > Run Selected Line(s)`
- Usar el atajo de teclado `CTRL + ENTER` o `CTRL + R`
- Usar el ícono `Run` de la barra de herramientas de la pestaña del script

Para guardar el script:

- Ir al menu `File > Save`
- Usar el atajo de teclado `CTRL + S`
- Usar el ícono con el diskette de la barra de herramientas global o de la pestaña del script activo.
