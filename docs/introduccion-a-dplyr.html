<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introducción al diseño y análisis estadístico de experimentos usando R</title>
  <meta name="description" content="Material complementario para el dictado del curso <em>Diseño de Experimentos</em> de la Maestría de Cultivos Intensivos de la FCA-UNL">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="Introducción al diseño y análisis estadístico de experimentos usando R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/choose_OS.png" />
  <meta property="og:description" content="Material complementario para el dictado del curso <em>Diseño de Experimentos</em> de la Maestría de Cultivos Intensivos de la FCA-UNL" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introducción al diseño y análisis estadístico de experimentos usando R" />
  
  <meta name="twitter:description" content="Material complementario para el dictado del curso <em>Diseño de Experimentos</em> de la Maestría de Cultivos Intensivos de la FCA-UNL" />
  <meta name="twitter:image" content="images/choose_OS.png" />

<meta name="author" content="Agustín Alesso">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="aspectos-basicos-del-lenguaje-r.html">
<link rel="next" href="introduccion-a-ggplot2.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introducción</a></li>
<li class="chapter" data-level="1" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html"><i class="fa fa-check"></i><b>1</b> Empezando con R y RStudio</a><ul>
<li class="chapter" data-level="1.1" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#que-es-r-y-rstudio"><i class="fa fa-check"></i><b>1.1</b> ¿Qué es R y RStudio?</a></li>
<li class="chapter" data-level="1.2" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#como-instalar-r-y-rstudio"><i class="fa fa-check"></i><b>1.2</b> ¿Cómo instalar R y RStudio?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#instalacion-de-r"><i class="fa fa-check"></i><b>1.2.1</b> Instalación de R</a></li>
<li class="chapter" data-level="1.2.2" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#instalacion-de-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Instalación de RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#primera-sesion"><i class="fa fa-check"></i><b>1.3</b> Primera sesión</a><ul>
<li class="chapter" data-level="1.3.1" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#la-consola"><i class="fa fa-check"></i><b>1.3.1</b> La consola</a></li>
<li class="chapter" data-level="1.3.2" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#el-script"><i class="fa fa-check"></i><b>1.3.2</b> El script</a></li>
<li class="chapter" data-level="1.3.3" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#proyecto"><i class="fa fa-check"></i><b>1.3.3</b> Proyecto</a></li>
<li class="chapter" data-level="1.3.4" data-path="empezando-con-r-y-rstudio.html"><a href="empezando-con-r-y-rstudio.html#ayuda"><i class="fa fa-check"></i><b>1.3.4</b> Ayuda!!!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html"><i class="fa fa-check"></i><b>2</b> Aspectos básicos del lenguaje R</a><ul>
<li class="chapter" data-level="2.1" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#operadores-matematicos"><i class="fa fa-check"></i><b>2.1</b> Operadores matemáticos</a></li>
<li class="chapter" data-level="2.2" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#operadores-logicos"><i class="fa fa-check"></i><b>2.2</b> Operadores lógicos</a></li>
<li class="chapter" data-level="2.3" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#variables-y-objetos"><i class="fa fa-check"></i><b>2.3</b> Variables y objetos</a></li>
<li class="chapter" data-level="2.4" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#funciones-y-argumentos"><i class="fa fa-check"></i><b>2.4</b> Funciones y argumentos</a></li>
<li class="chapter" data-level="2.5" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#vectores"><i class="fa fa-check"></i><b>2.5</b> Vectores</a></li>
<li class="chapter" data-level="2.6" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#tipos-de-datos"><i class="fa fa-check"></i><b>2.6</b> Tipos de datos</a><ul>
<li class="chapter" data-level="2.6.1" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#numericos-numeric"><i class="fa fa-check"></i><b>2.6.1</b> Numéricos (<code>numeric</code>)</a></li>
<li class="chapter" data-level="2.6.2" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#texto-character"><i class="fa fa-check"></i><b>2.6.2</b> Texto (<code>character</code>)</a></li>
<li class="chapter" data-level="2.6.3" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#logicos-logic"><i class="fa fa-check"></i><b>2.6.3</b> Lógicos (<code>logic</code>)</a></li>
<li class="chapter" data-level="2.6.4" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#otros"><i class="fa fa-check"></i><b>2.6.4</b> Otros</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#estructura-de-datos"><i class="fa fa-check"></i><b>2.7</b> Estructura de datos</a><ul>
<li class="chapter" data-level="2.7.1" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#matriz-matrix"><i class="fa fa-check"></i><b>2.7.1</b> Matriz (<code>matrix</code>)</a></li>
<li class="chapter" data-level="2.7.2" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#listas-list"><i class="fa fa-check"></i><b>2.7.2</b> Listas (<code>list</code>)</a></li>
<li class="chapter" data-level="2.7.3" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#hoja-de-datos-data.frame"><i class="fa fa-check"></i><b>2.7.3</b> Hoja de datos (<code>data.frame</code>)</a></li>
<li class="chapter" data-level="2.7.4" data-path="aspectos-basicos-del-lenguaje-r.html"><a href="aspectos-basicos-del-lenguaje-r.html#factores-factor-y-ordered"><i class="fa fa-check"></i><b>2.7.4</b> Factores (<code>factor</code> y <code>ordered</code>)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html"><i class="fa fa-check"></i><b>3</b> Introducción a <code>dplyr</code></a><ul>
<li class="chapter" data-level="3.1" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#que-es-dplyr"><i class="fa fa-check"></i><b>3.1</b> ¿Qué es <code>dplyr</code>?</a></li>
<li class="chapter" data-level="3.2" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#como-conseguir-dplyr"><i class="fa fa-check"></i><b>3.2</b> ¿Cómo conseguir <code>dplyr</code>?</a></li>
<li class="chapter" data-level="3.3" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#verbos-importantes-de-dplyr-para-recordar"><i class="fa fa-check"></i><b>3.3</b> Verbos importantes de <code>dplyr</code> para recordar</a></li>
<li class="chapter" data-level="3.4" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#dplyr-en-accion"><i class="fa fa-check"></i><b>3.4</b> <code>dplyr</code> en acción</a><ul>
<li class="chapter" data-level="3.4.1" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#seleccionando-variables"><i class="fa fa-check"></i><b>3.4.1</b> Seleccionando variables</a></li>
<li class="chapter" data-level="3.4.2" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#seleccionando-observaciones"><i class="fa fa-check"></i><b>3.4.2</b> Seleccionando observaciones</a></li>
<li class="chapter" data-level="3.4.3" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#encadenando-operaciones-operador"><i class="fa fa-check"></i><b>3.4.3</b> Encadenando operaciones (operador <code>%&gt;%</code>)</a></li>
<li class="chapter" data-level="3.4.4" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#ordenar-las-filas"><i class="fa fa-check"></i><b>3.4.4</b> Ordenar las filas</a></li>
<li class="chapter" data-level="3.4.5" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#crear-o-transformar-columnas"><i class="fa fa-check"></i><b>3.4.5</b> Crear o transformar columnas</a></li>
<li class="chapter" data-level="3.4.6" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#resmuir-datos"><i class="fa fa-check"></i><b>3.4.6</b> Resmuir datos</a></li>
<li class="chapter" data-level="3.4.7" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#agrupar-ultimo-pero-no-menos-importante"><i class="fa fa-check"></i><b>3.4.7</b> Agrupar (último pero no menos importante)</a></li>
<li class="chapter" data-level="3.4.8" data-path="introduccion-a-dplyr.html"><a href="introduccion-a-dplyr.html#muestrear"><i class="fa fa-check"></i><b>3.4.8</b> Muestrear</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introduccion-a-ggplot2.html"><a href="introduccion-a-ggplot2.html"><i class="fa fa-check"></i><b>4</b> Introducción a <code>ggplot2</code></a><ul>
<li class="chapter" data-level="4.1" data-path="introduccion-a-ggplot2.html"><a href="introduccion-a-ggplot2.html#sistemas-de-graficos-en-r"><i class="fa fa-check"></i><b>4.1</b> Sistemas de gráficos en <strong>R</strong></a></li>
<li class="chapter" data-level="4.2" data-path="introduccion-a-ggplot2.html"><a href="introduccion-a-ggplot2.html#como-conseguir-ggplot2"><i class="fa fa-check"></i><b>4.2</b> ¿Cómo conseguir <code>ggplot2</code>?</a></li>
<li class="chapter" data-level="4.3" data-path="introduccion-a-ggplot2.html"><a href="introduccion-a-ggplot2.html#partes-basicas-de-un-grafico"><i class="fa fa-check"></i><b>4.3</b> Partes básicas de un gráfico</a></li>
<li class="chapter" data-level="4.4" data-path="introduccion-a-ggplot2.html"><a href="introduccion-a-ggplot2.html#todo-en-un-solo-paso"><i class="fa fa-check"></i><b>4.4</b> Todo en un solo paso</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html"><i class="fa fa-check"></i><b>5</b> Revisión de estadística básica</a><ul>
<li class="chapter" data-level="5.1" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#que-es-la-estadistica"><i class="fa fa-check"></i><b>5.1</b> ¿Qué es la estadística?</a></li>
<li class="chapter" data-level="5.2" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#variables"><i class="fa fa-check"></i><b>5.2</b> Variables</a><ul>
<li class="chapter" data-level="5.2.1" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#tipos-de-datos-1"><i class="fa fa-check"></i><b>5.2.1</b> Tipos de datos</a></li>
<li class="chapter" data-level="5.2.2" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#escala-de-medicion"><i class="fa fa-check"></i><b>5.2.2</b> Escala de medición</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#poblacion-y-muestra"><i class="fa fa-check"></i><b>5.3</b> Población y muestra</a></li>
<li class="chapter" data-level="5.4" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#estadistica-descriptiva"><i class="fa fa-check"></i><b>5.4</b> Estadística descriptiva</a><ul>
<li class="chapter" data-level="5.4.1" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#tablas-de-frecuencias"><i class="fa fa-check"></i><b>5.4.1</b> Tablas de frecuencias</a></li>
<li class="chapter" data-level="5.4.2" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#graficos"><i class="fa fa-check"></i><b>5.4.2</b> Gráficos</a></li>
<li class="chapter" data-level="5.4.3" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#medidas-de-resumen"><i class="fa fa-check"></i><b>5.4.3</b> Medidas de resumen</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#variabiles-aleatorias-y-distribuciones-de-probabilidades"><i class="fa fa-check"></i><b>5.5</b> Variabiles aleatorias y distribuciones de probabilidades</a><ul>
<li class="chapter" data-level="5.5.1" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#distribucion-de-probabilidades"><i class="fa fa-check"></i><b>5.5.1</b> Distribución de probabilidades</a></li>
<li class="chapter" data-level="5.5.2" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#esperanza-y-varianza"><i class="fa fa-check"></i><b>5.5.2</b> Esperanza y varianza</a></li>
<li class="chapter" data-level="5.5.3" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#distribucion-normal"><i class="fa fa-check"></i><b>5.5.3</b> Distribución Normal</a></li>
<li class="chapter" data-level="5.5.4" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#distribucion-de-la-media-muestral"><i class="fa fa-check"></i><b>5.5.4</b> Distribución de la media muestral</a></li>
<li class="chapter" data-level="5.5.5" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#teorema-del-limite-central"><i class="fa fa-check"></i><b>5.5.5</b> Teorema del Límite Central</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#intervalos-de-confianza-generalidades"><i class="fa fa-check"></i><b>5.6</b> Intervalos de Confianza: generalidades</a><ul>
<li class="chapter" data-level="5.6.1" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#ic-de-la-media-mu-con-sigma-desconocido"><i class="fa fa-check"></i><b>5.6.1</b> IC de la media (<span class="math inline">\(\mu\)</span>) con <span class="math inline">\(\sigma\)</span> desconocido</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#test-hipotesis-generalidades"><i class="fa fa-check"></i><b>5.7</b> Test hipotesis: generalidades</a><ul>
<li class="chapter" data-level="5.7.1" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#como-se-formulan-las-hipotesis"><i class="fa fa-check"></i><b>5.7.1</b> ¿Cómo se formulan las hipótesis?</a></li>
<li class="chapter" data-level="5.7.2" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#estadistico-de-prueba"><i class="fa fa-check"></i><b>5.7.2</b> Estadístico de prueba</a></li>
<li class="chapter" data-level="5.7.3" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#zona-de-rechazo"><i class="fa fa-check"></i><b>5.7.3</b> Zona de rechazo</a></li>
<li class="chapter" data-level="5.7.4" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#errores"><i class="fa fa-check"></i><b>5.7.4</b> Errores</a></li>
<li class="chapter" data-level="5.7.5" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#regla-de-decison-y-valores-p"><i class="fa fa-check"></i><b>5.7.5</b> Regla de decisón y valores <span class="math inline">\(p\)</span></a></li>
<li class="chapter" data-level="5.7.6" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#conclusiones"><i class="fa fa-check"></i><b>5.7.6</b> Conclusiones</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#comparacion-de-dos-poblaciones"><i class="fa fa-check"></i><b>5.8</b> Comparación de dos poblaciones</a><ul>
<li class="chapter" data-level="5.8.1" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#muestras-independientes"><i class="fa fa-check"></i><b>5.8.1</b> Muestras independientes</a></li>
<li class="chapter" data-level="5.8.2" data-path="revision-de-estadistica-basica.html"><a href="revision-de-estadistica-basica.html#muestras-apareadas"><i class="fa fa-check"></i><b>5.8.2</b> Muestras apareadas</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción al diseño y análisis estadístico de experimentos usando R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduccion-a-dplyr" class="section level1">
<h1><span class="header-section-number">Capítulo 3</span> Introducción a <code>dplyr</code></h1>
<p>En este capítulo y el siguiente se introducirán dos paquetes de <strong>R</strong> que están siendo ampliamente utilizados por la comunidad: <code>dplyr</code> y <code>ggplot2</code>.</p>
<div id="que-es-dplyr" class="section level2">
<h2><span class="header-section-number">3.1</span> ¿Qué es <code>dplyr</code>?</h2>
<p><code>dplyr</code> es un paquete de <strong>R</strong> muy potente para la exploración, transformación y resumen de datos en formato de tabla con filas (observaciones) y columnas (variables). Es un componente de un conjunto de packages llamado <code>tidyverse</code> desarrollados por <a href="http://hadley.nz/">Hadley Wickham</a></p>
<p>El paquete contiene un conjunto de funciones (o <em>verbos</em>) que realizan operaciones comunes para el manejo de datos tales como: filtrar filas, seleccionar columnas, re-ordenar filas, agregar o transformar columnas, resumir datos. También permite agrupar los datos facilitando la estrategia <em>split-apply-combine</em>, es decir, dividir (<em>split</em>) los datos según una variable de grupo, aplicar (<em>apply</em>) alguna transformación o resumen y combinar (<em>combine</em>) las partes para presentar los resultados.</p>
<p>Si bien <strong>R</strong> base tiene funciones que realizan las mismas tareas (<code>split()</code>, <code>subset()</code>, <code>apply()</code>, <code>sapply()</code>, <code>lapply()</code>, <code>tapply()</code> and <code>aggregate()</code>), el paquete <code>dplyr</code> brinda una interface más consistente que permite trabajar de manera más facil con <code>data.frame</code> (tabla de datos) más que con vectores.</p>
</div>
<div id="como-conseguir-dplyr" class="section level2">
<h2><span class="header-section-number">3.2</span> ¿Cómo conseguir <code>dplyr</code>?</h2>
<p>Para instalar por primera vez en la computadora:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb88-1" title="1"><span class="co"># Solo</span></a>
<a class="sourceLine" id="cb88-2" title="2"><span class="kw">install.packages</span>(<span class="st">&quot;dplyr&quot;</span>)</a>
<a class="sourceLine" id="cb88-3" title="3"></a>
<a class="sourceLine" id="cb88-4" title="4"><span class="co"># O junto con la familia tidyverse</span></a>
<a class="sourceLine" id="cb88-5" title="5"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</a></code></pre></div>
<p>Lo anterior se debe realizar por única vez si el paquete no está previamente instalado en la máquina. Para usar las funciones en una sesion de trabajo hay que cargarlo con <code>library()</code>:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1"><span class="co"># Solo</span></a>
<a class="sourceLine" id="cb89-2" title="2"><span class="kw">library</span>(<span class="st">&quot;dplyr&quot;</span>)</a></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1"><span class="co"># O junto con la familia tidyverse</span></a>
<a class="sourceLine" id="cb93-2" title="2"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</a></code></pre></div>
<pre><code>## ── Attaching packages ───────────── tidyverse 1.2.1 ──</code></pre>
<pre><code>## ✔ ggplot2 3.0.0     ✔ readr   1.1.1
## ✔ tibble  1.4.2     ✔ purrr   0.2.5
## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
## ✔ ggplot2 3.0.0     ✔ forcats 0.3.0</code></pre>
<pre><code>## ── Conflicts ──────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<p><strong>R</strong> va a avisarnos en la consola que esta enmascarando (reemplazando) algunas funciones que ya estaban en el entorno, o bien el paquete nos devuelve algun mensaje. A menos que diga <code>Error ...</code>, eso está bien.</p>
</div>
<div id="verbos-importantes-de-dplyr-para-recordar" class="section level2">
<h2><span class="header-section-number">3.3</span> Verbos importantes de <code>dplyr</code> para recordar</h2>
<p>Toda la estrategia de trabajo con datos de <code>dplyr</code> se basa en 6 verbos:</p>
<table>
<thead>
<tr class="header">
<th align="left">verbo</th>
<th align="left">descripción</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>select()</code></td>
<td align="left">selecciona columnas (variables)</td>
</tr>
<tr class="even">
<td align="left"><code>filter()</code></td>
<td align="left">filtra o selecciona las filas (observaciones)</td>
</tr>
<tr class="odd">
<td align="left"><code>arrange()</code></td>
<td align="left">re-ordena las filas</td>
</tr>
<tr class="even">
<td align="left"><code>mutate()</code></td>
<td align="left">crea nuevas columnas o modifica las preexistentes</td>
</tr>
<tr class="odd">
<td align="left"><code>summarise()</code></td>
<td align="left">resumen los valores de una variable</td>
</tr>
<tr class="even">
<td align="left"><code>group_by()</code></td>
<td align="left">permite aplicar los verbos anteriores en subgrupos (<em>split-apply-combine</em>)</td>
</tr>
<tr class="odd">
<td align="left"><code>sample_n()</code></td>
<td align="left">para tomar muestras aleatorias con o sin reposición</td>
</tr>
</tbody>
</table>
<p>En la mayoría de los casos la sintaxis es:</p>
<p><code>function(que_datos, que_hacer_con_los_datos)</code></p>
<p>En <code>que_datos</code> hay que poner el nombre del set de datos o <code>data.frame</code> (a menos que se use el operador <code>%&gt;%</code> para encadenar, mas adelante) y en <code>que_hacer_con_los_datos</code> indicar que operación, condicion, transformacion, etc aplicar a las filas y columnas.</p>
</div>
<div id="dplyr-en-accion" class="section level2">
<h2><span class="header-section-number">3.4</span> <code>dplyr</code> en acción</h2>
<p>Para ilustrar el uso del paquete vamos a usar los datos contenidos en el archivo <a href="https://github.com/Estadistica-FCA/tutoriales_R/raw/master/data/pesada_terneros.xlsx"><code>pesada_terneros.xlsx</code></a>.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1"><span class="co"># Cargar los datos con readxl</span></a>
<a class="sourceLine" id="cb97-2" title="2"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb97-3" title="3">terneros &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;./data/pesada_terneros.xlsx&quot;</span>)</a></code></pre></div>
<div id="seleccionando-variables" class="section level3">
<h3><span class="header-section-number">3.4.1</span> Seleccionando variables</h3>
<p>Una tareas básicas cuando se exploran datos es la selección de columnas de interés (variables). Esto se lleva a cabo con <code>select()</code>.</p>
<p>Para seleccionar las columnas <code>Procedencia</code>, <code>IDV</code> y <code>Peso</code>:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" title="1"><span class="co"># Sin asignar</span></a>
<a class="sourceLine" id="cb98-2" title="2"><span class="kw">select</span>(terneros, Procedencia, IDV, Peso)</a></code></pre></div>
<pre><code>## # A tibble: 1,598 x 3
##    Procedencia IDV        Peso
##    &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;
##  1 La Rosita   NR047A202   204
##  2 La Rosita   GN685B267   186
##  3 La Rosita   AI101A751   182
##  4 La Rosita   TM603C877   186
##  5 La Rosita   TM420B797   186
##  6 La Rosita   LH837F500   208
##  7 La Rosita   NR047A217   170
##  8 La Rosita   LH837F508   188
##  9 La Rosita   GN685B256   172
## 10 La Rosita   QW110A058   172
## # ... with 1,588 more rows</code></pre>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1"><span class="co"># Creando un nuevo set de datos</span></a>
<a class="sourceLine" id="cb100-2" title="2">mis_columnas &lt;-<span class="st"> </span><span class="kw">select</span>(terneros, Procedencia, IDV, Peso)</a></code></pre></div>
<p>Por defecto, si no se asigna a un nuevo objeto, el resultado de la operación se imprime en la consola con la función <code>print()</code> la cual por defecto muestra las 10 primeras observaciones y la cantidad de columnas que entran en la pantalla. Aquellas columnas que no entran son indicadas al pie.</p>
<p>Si quiero ver más registros se puede usar el argumento <code>n =</code> de <code>print()</code></p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" title="1"><span class="kw">print</span>(mis_columnas, <span class="dt">n =</span> <span class="dv">15</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1,598 x 3
##    Procedencia IDV        Peso
##    &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;
##  1 La Rosita   NR047A202   204
##  2 La Rosita   GN685B267   186
##  3 La Rosita   AI101A751   182
##  4 La Rosita   TM603C877   186
##  5 La Rosita   TM420B797   186
##  6 La Rosita   LH837F500   208
##  7 La Rosita   NR047A217   170
##  8 La Rosita   LH837F508   188
##  9 La Rosita   GN685B256   172
## 10 La Rosita   QW110A058   172
## 11 La Rosita   LH837F497   188
## 12 La Rosita   TM420B803   180
## 13 La Rosita   LH837F514   198
## 14 La Rosita   II641B940   200
## 15 La Rosita   IY735C      242
## # ... with 1,583 more rows</code></pre>
<p>Con <code>n = &quot;all&quot;</code> se imprimen todas (no se muestra por razones obvias)</p>
<p>El orden en que aparecen las variables en el resultado es el orden que se utilizó al seleccionarlas.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" title="1"><span class="co"># El orden altera el producto</span></a>
<a class="sourceLine" id="cb103-2" title="2"><span class="kw">select</span>(terneros, Procedencia, IDV, Peso)</a></code></pre></div>
<pre><code>## # A tibble: 1,598 x 3
##    Procedencia IDV        Peso
##    &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;
##  1 La Rosita   NR047A202   204
##  2 La Rosita   GN685B267   186
##  3 La Rosita   AI101A751   182
##  4 La Rosita   TM603C877   186
##  5 La Rosita   TM420B797   186
##  6 La Rosita   LH837F500   208
##  7 La Rosita   NR047A217   170
##  8 La Rosita   LH837F508   188
##  9 La Rosita   GN685B256   172
## 10 La Rosita   QW110A058   172
## # ... with 1,588 more rows</code></pre>
<p>También se puede usar los comnados <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, etc (ver <code>?select_helpers)</code> para más opciones). Para elegir varias columnas que tienen un patron sin tener que tipear todos los nombres.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" title="1"><span class="co"># Selecciona columnas que empiezan con P</span></a>
<a class="sourceLine" id="cb105-2" title="2"><span class="kw">select</span>(terneros, <span class="kw">starts_with</span>(<span class="st">&quot;P&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 1,598 x 2
##    Procedencia  Peso
##    &lt;chr&gt;       &lt;dbl&gt;
##  1 La Rosita     204
##  2 La Rosita     186
##  3 La Rosita     182
##  4 La Rosita     186
##  5 La Rosita     186
##  6 La Rosita     208
##  7 La Rosita     170
##  8 La Rosita     188
##  9 La Rosita     172
## 10 La Rosita     172
## # ... with 1,588 more rows</code></pre>
<p>Para omitir algunas columnas en la seleccion se puede usar el <code>-</code> antes del nombre.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" title="1"><span class="co"># Selecciona columnas que empiezan con P</span></a>
<a class="sourceLine" id="cb107-2" title="2"><span class="kw">select</span>(terneros, <span class="op">-</span>IDV, <span class="op">-</span><span class="kw">starts_with</span>(<span class="st">&quot;P&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 1,598 x 1
##    Fecha              
##    &lt;dttm&gt;             
##  1 2017-04-06 00:00:00
##  2 2017-04-06 00:00:00
##  3 2017-04-06 00:00:00
##  4 2017-04-06 00:00:00
##  5 2017-04-06 00:00:00
##  6 2017-04-06 00:00:00
##  7 2017-04-06 00:00:00
##  8 2017-04-06 00:00:00
##  9 2017-04-06 00:00:00
## 10 2017-04-06 00:00:00
## # ... with 1,588 more rows</code></pre>
</div>
<div id="seleccionando-observaciones" class="section level3">
<h3><span class="header-section-number">3.4.2</span> Seleccionando observaciones</h3>
<p>Otra tarea muy frecuente es seleccionar casos o observaciones que cumplan con alguna condición. Esto se lleva a cabo con <code>filter()</code>. Se pueden usar los operadores <em>booleanos</em> <code>==</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>!=</code>, <code>%in%</code>) para crear pruebas o condiciones lógicas.</p>
<p>Para seleccionar los terneros de <code>Los Corralitos</code>:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" title="1"><span class="co"># Sin asignar</span></a>
<a class="sourceLine" id="cb109-2" title="2"><span class="kw">filter</span>(terneros, Procedencia <span class="op">==</span><span class="st"> &#39;Los Corralitos&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 575 x 4
##    IDV       Procedencia    Fecha                Peso
##    &lt;chr&gt;     &lt;chr&gt;          &lt;dttm&gt;              &lt;dbl&gt;
##  1 PO150A167 Los Corralitos 2017-04-10 00:00:00   224
##  2 PO150A168 Los Corralitos 2017-04-10 00:00:00   234
##  3 PO150A169 Los Corralitos 2017-04-10 00:00:00   204
##  4 PO150A460 Los Corralitos 2017-04-10 00:00:00   196
##  5 PO150A673 Los Corralitos 2017-04-10 00:00:00   246
##  6 PO150A461 Los Corralitos 2017-04-10 00:00:00   196
##  7 PO150A462 Los Corralitos 2017-04-10 00:00:00   238
##  8 PO150A463 Los Corralitos 2017-04-10 00:00:00   210
##  9 PO150A433 Los Corralitos 2017-04-10 00:00:00   174
## 10 PO150A434 Los Corralitos 2017-04-10 00:00:00   222
## # ... with 565 more rows</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" title="1"><span class="co"># Creando un nuevo set de datos</span></a>
<a class="sourceLine" id="cb111-2" title="2">corralitos &lt;-<span class="st"> </span><span class="kw">filter</span>(terneros, Procedencia <span class="op">==</span><span class="st"> &#39;Los Corralitos&#39;</span>)</a></code></pre></div>
<p>La seleccion se puede hacer por más de una condicion. Por ejemplo, seleccionar los de <code>Los Corralitos</code> que pesen más de 200 kg:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" title="1"><span class="kw">filter</span>(terneros, Procedencia <span class="op">==</span><span class="st"> &#39;Los Corralitos&#39;</span>, Peso <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>)</a></code></pre></div>
<pre><code>## # A tibble: 260 x 4
##    IDV       Procedencia    Fecha                Peso
##    &lt;chr&gt;     &lt;chr&gt;          &lt;dttm&gt;              &lt;dbl&gt;
##  1 PO150A167 Los Corralitos 2017-04-10 00:00:00   224
##  2 PO150A168 Los Corralitos 2017-04-10 00:00:00   234
##  3 PO150A169 Los Corralitos 2017-04-10 00:00:00   204
##  4 PO150A673 Los Corralitos 2017-04-10 00:00:00   246
##  5 PO150A462 Los Corralitos 2017-04-10 00:00:00   238
##  6 PO150A463 Los Corralitos 2017-04-10 00:00:00   210
##  7 PO150A434 Los Corralitos 2017-04-10 00:00:00   222
##  8 PO150A435 Los Corralitos 2017-04-10 00:00:00   208
##  9 PO150A675 Los Corralitos 2017-04-10 00:00:00   216
## 10 PO150A681 Los Corralitos 2017-04-10 00:00:00   226
## # ... with 250 more rows</code></pre>
<p><code>filter()</code> asume que cada condicion se debe cumplir en simultaneo para que la observación sea seleccionada. Esto equivale a utilizar el operador <code>&amp;</code> (<em>Y</em>). En caso de querer seleccionar aquellos registros que cumple una u otra condicion se usa el operador <code>|</code> (<em>O</em>). Poniendo <code>!</code> delante de la condicion se invierte la selección.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" title="1"><span class="co"># Operador &amp;</span></a>
<a class="sourceLine" id="cb114-2" title="2"><span class="kw">filter</span>(terneros, Procedencia <span class="op">==</span><span class="st"> &#39;Los Corralitos&#39;</span> <span class="op">&amp;</span><span class="st"> </span>Peso <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>)</a></code></pre></div>
<pre><code>## # A tibble: 260 x 4
##    IDV       Procedencia    Fecha                Peso
##    &lt;chr&gt;     &lt;chr&gt;          &lt;dttm&gt;              &lt;dbl&gt;
##  1 PO150A167 Los Corralitos 2017-04-10 00:00:00   224
##  2 PO150A168 Los Corralitos 2017-04-10 00:00:00   234
##  3 PO150A169 Los Corralitos 2017-04-10 00:00:00   204
##  4 PO150A673 Los Corralitos 2017-04-10 00:00:00   246
##  5 PO150A462 Los Corralitos 2017-04-10 00:00:00   238
##  6 PO150A463 Los Corralitos 2017-04-10 00:00:00   210
##  7 PO150A434 Los Corralitos 2017-04-10 00:00:00   222
##  8 PO150A435 Los Corralitos 2017-04-10 00:00:00   208
##  9 PO150A675 Los Corralitos 2017-04-10 00:00:00   216
## 10 PO150A681 Los Corralitos 2017-04-10 00:00:00   226
## # ... with 250 more rows</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" title="1"><span class="co"># Operador |</span></a>
<a class="sourceLine" id="cb116-2" title="2"><span class="kw">filter</span>(terneros, Procedencia <span class="op">==</span><span class="st"> &#39;Los Corralitos&#39;</span> <span class="op">|</span><span class="st"> </span>Peso <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>)</a></code></pre></div>
<pre><code>## # A tibble: 779 x 4
##    IDV       Procedencia  Fecha                Peso
##    &lt;chr&gt;     &lt;chr&gt;        &lt;dttm&gt;              &lt;dbl&gt;
##  1 NR047A202 La Rosita    2017-04-06 00:00:00   204
##  2 LH837F500 La Rosita    2017-04-06 00:00:00   208
##  3 IY735C    La Rosita    2017-04-06 00:00:00   242
##  4 QW110A072 La Rosita    2017-04-06 00:00:00   218
##  5 LH837F526 La Rosita    2017-04-06 00:00:00   208
##  6 DS289A491 La Rosita    2017-04-06 00:00:00   204
##  7 TL698HK39 La Rosita    2017-04-06 00:00:00   218
##  8 LH837F538 La Rosita    2017-04-06 00:00:00   204
##  9 IW751A017 La Rosita    2017-04-06 00:00:00   222
## 10 NO133A004 Las Glicinas 2017-04-09 00:00:00   258
## # ... with 769 more rows</code></pre>
<p>Con el operador <code>%in%</code> se puede especificar un rango de valores que deben cumplir. Por ejemplo terneros de <code>Los Corralitos</code>, <code>Las Glicinas</code> y <code>Don Alberto</code></p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" title="1"><span class="co"># Indicando cada nombre</span></a>
<a class="sourceLine" id="cb118-2" title="2"><span class="kw">filter</span>(terneros, Procedencia <span class="op">==</span><span class="st"> &#39;Los Corralitos&#39;</span>, Procedencia <span class="op">==</span><span class="st"> &#39;Las Glicinas&#39;</span>, Procedencia <span class="op">==</span><span class="st"> &#39;Don Alberto&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 0 x 4
## # ... with 4 variables: IDV &lt;chr&gt;, Procedencia &lt;chr&gt;, Fecha &lt;dttm&gt;,
## #   Peso &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" title="1"><span class="co"># Más resumido con %in%</span></a>
<a class="sourceLine" id="cb120-2" title="2"><span class="kw">filter</span>(terneros, Procedencia <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Los Corralitos&#39;</span>, <span class="st">&#39;Las Glicinas&#39;</span>, <span class="st">&#39;Don Alberto&#39;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 1,138 x 4
##    IDV       Procedencia  Fecha                Peso
##    &lt;chr&gt;     &lt;chr&gt;        &lt;dttm&gt;              &lt;dbl&gt;
##  1 SZ208I507 Las Glicinas 2017-04-09 00:00:00   152
##  2 SZ208H993 Las Glicinas 2017-04-09 00:00:00   114
##  3 SZ208H849 Las Glicinas 2017-04-09 00:00:00   158
##  4 SZ208H777 Las Glicinas 2017-04-09 00:00:00   112
##  5 GT542A562 Las Glicinas 2017-04-09 00:00:00   114
##  6 OQ152A550 Las Glicinas 2017-04-09 00:00:00   182
##  7 NO133A057 Las Glicinas 2017-04-09 00:00:00   168
##  8 SZ208H888 Las Glicinas 2017-04-09 00:00:00   196
##  9 OQ152A566 Las Glicinas 2017-04-09 00:00:00   176
## 10 NO133A047 Las Glicinas 2017-04-09 00:00:00   180
## # ... with 1,128 more rows</code></pre>
</div>
<div id="encadenando-operaciones-operador" class="section level3">
<h3><span class="header-section-number">3.4.3</span> Encadenando operaciones (operador <code>%&gt;%</code>)</h3>
<p><code>dplyr</code> importa el operador <code>%&gt;%</code> de otro paquete llamado <code>magrittr</code>. Este operador permite encadenar operaciones realizadas con los verbos. De este modo no hay que ir creando tablas intermedias o anidar funciones. El operador traduce como <code>luego</code> y se le de izquierda a derecha y se puede.</p>
<p>Ejemplo: Reportar los IDV y peso de los terneros con más de 250 kg. Esto implicaría seleccionar las columnas de interés y luego filtrar la tabla o vice versa.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" title="1"><span class="co"># Creando tablas intermedias</span></a>
<a class="sourceLine" id="cb122-2" title="2">terneros2 &lt;-<span class="st"> </span><span class="kw">select</span>(terneros, IDV, Peso)</a>
<a class="sourceLine" id="cb122-3" title="3">terneros2</a></code></pre></div>
<pre><code>## # A tibble: 1,598 x 2
##    IDV        Peso
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 NR047A202   204
##  2 GN685B267   186
##  3 AI101A751   182
##  4 TM603C877   186
##  5 TM420B797   186
##  6 LH837F500   208
##  7 NR047A217   170
##  8 LH837F508   188
##  9 GN685B256   172
## 10 QW110A058   172
## # ... with 1,588 more rows</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" title="1">terneros2 &lt;-<span class="st"> </span><span class="kw">filter</span>(terneros2, Peso <span class="op">&gt;</span><span class="st"> </span><span class="dv">250</span>)</a>
<a class="sourceLine" id="cb124-2" title="2">terneros2</a></code></pre></div>
<pre><code>## # A tibble: 75 x 2
##    IDV        Peso
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 NO133A004   258
##  2 OQ152A456   258
##  3 NO133A006   256
##  4 OQ152A553   256
##  5 PO150A166   290
##  6 PO150A674   256
##  7 PO150A656   272
##  8 NO133A045   264
##  9 PO150A571   264
## 10 PO150A686   262
## # ... with 65 more rows</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb126-1" title="1"><span class="co"># Anidando</span></a>
<a class="sourceLine" id="cb126-2" title="2"><span class="kw">filter</span>(<span class="kw">select</span>(terneros, IDV, Peso), Peso <span class="op">&gt;</span><span class="st"> </span><span class="dv">250</span>)</a></code></pre></div>
<pre><code>## # A tibble: 75 x 2
##    IDV        Peso
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 NO133A004   258
##  2 OQ152A456   258
##  3 NO133A006   256
##  4 OQ152A553   256
##  5 PO150A166   290
##  6 PO150A674   256
##  7 PO150A656   272
##  8 NO133A045   264
##  9 PO150A571   264
## 10 PO150A686   262
## # ... with 65 more rows</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb128-1" title="1"><span class="co"># Usando %&gt;%</span></a>
<a class="sourceLine" id="cb128-2" title="2">terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb128-3" title="3"><span class="st">  </span><span class="kw">select</span>(IDV, Peso) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb128-4" title="4"><span class="st">  </span><span class="kw">filter</span>(Peso <span class="op">&gt;</span><span class="st">  </span><span class="dv">250</span>)</a></code></pre></div>
<pre><code>## # A tibble: 75 x 2
##    IDV        Peso
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 NO133A004   258
##  2 OQ152A456   258
##  3 NO133A006   256
##  4 OQ152A553   256
##  5 PO150A166   290
##  6 PO150A674   256
##  7 PO150A656   272
##  8 NO133A045   264
##  9 PO150A571   264
## 10 PO150A686   262
## # ... with 65 more rows</code></pre>
<p>Con <code>%&gt;%</code> se puede omitir el nombre de la tabla sobre la que se está trabajando (bonus: menos tipeo).</p>
<p>La última opción se lee: _tomar la tabla <code>terneros</code>, <strong>luego</strong> seleccionar las columnas <code>IDV</code> y <code>Peso</code>, <strong>luego</strong> filtrar los terneros con pesos mayores a 250 kg.</p>
<p>El operador de encadenamiento es muy útil cuando se encadenan muchas operaciones.</p>
</div>
<div id="ordenar-las-filas" class="section level3">
<h3><span class="header-section-number">3.4.4</span> Ordenar las filas</h3>
<p>Para ordenar según algun criterio aplicado a las columnas se usa <code>arrange()</code>. Por ejemplo, continuar con lo anterior pero mostrar ordenadospor peso.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" title="1"><span class="co"># Ordenar de menor a mayor</span></a>
<a class="sourceLine" id="cb130-2" title="2">terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb130-3" title="3"><span class="st">  </span><span class="kw">select</span>(IDV, Peso) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb130-4" title="4"><span class="st">  </span><span class="kw">filter</span>(Peso <span class="op">&gt;</span><span class="st">  </span><span class="dv">250</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb130-5" title="5"><span class="st">  </span><span class="kw">arrange</span>(Peso)</a></code></pre></div>
<pre><code>## # A tibble: 75 x 2
##    IDV        Peso
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 PO150A546   252
##  2 NS509H081   252
##  3 PO15A710    252
##  4 NO133A019   254
##  5 PO150A784   254
##  6 IA671B182   254
##  7 IA671B176   254
##  8 PO150A716   254
##  9 NO133A006   256
## 10 OQ152A553   256
## # ... with 65 more rows</code></pre>
<p>Con <code>decs(variable)</code> se ordena de mayor a menor</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" title="1"><span class="co"># Ordenar de mayor a menor</span></a>
<a class="sourceLine" id="cb132-2" title="2">terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb132-3" title="3"><span class="st">  </span><span class="kw">select</span>(IDV, Peso) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb132-4" title="4"><span class="st">  </span><span class="kw">filter</span>(Peso <span class="op">&gt;</span><span class="st">  </span><span class="dv">250</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb132-5" title="5"><span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Peso))</a></code></pre></div>
<pre><code>## # A tibble: 75 x 2
##    IDV        Peso
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 PO150A679   384
##  2 IA671B041   294
##  3 MM429A932   292
##  4 PO150A166   290
##  5 PO150A763   288
##  6 IA671B106   288
##  7 NS509G964   286
##  8 PO150A821   284
##  9 IA671B045   282
## 10 NO133A000   280
## # ... with 65 more rows</code></pre>
</div>
<div id="crear-o-transformar-columnas" class="section level3">
<h3><span class="header-section-number">3.4.5</span> Crear o transformar columnas</h3>
<p>Para crear nuevas columnas aplicando funciones a otras, o bien para transformar columnas se usa <code>mutate()</code>. Se pueden modificar más de una columna a la vez. Por ejemplo, suponiendo que interesa obtener el logaritmo natura de los pesos o elevar los pesos al cuadrado.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" title="1">terneros <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb134-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">log_peso =</span> <span class="kw">log</span>(Peso), <span class="dt">peso2 =</span> Peso<span class="op">**</span><span class="dv">2</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb134-3" title="3"><span class="st">  </span><span class="kw">select</span>(Peso, log_peso, peso2)                        <span class="co"># para que se vea mejor el resultado </span></a></code></pre></div>
<pre><code>## # A tibble: 1,598 x 3
##     Peso log_peso peso2
##    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1   204     5.32 41616
##  2   186     5.23 34596
##  3   182     5.20 33124
##  4   186     5.23 34596
##  5   186     5.23 34596
##  6   208     5.34 43264
##  7   170     5.14 28900
##  8   188     5.24 35344
##  9   172     5.15 29584
## 10   172     5.15 29584
## # ... with 1,588 more rows</code></pre>
<p>Esto no cambia el set de datos <code>terneros</code> ya que no se lo asignó a ningun objeto. Para sobreescribir o actualiza el set de datos <code>terneros</code> hay que asignarlo al mismo objeto.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" title="1">terneros &lt;-<span class="st"> </span>terneros <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb136-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">log_peso =</span> <span class="kw">log</span>(Peso), <span class="dt">peso2 =</span> Peso<span class="op">**</span><span class="dv">2</span>)</a></code></pre></div>
<p>Aclaración: Si se hubiese usado <code>select()</code> el set de datos terneros solamente contendría las columnas seleccionadas.</p>
<p>Otro ejemplo más útil: calcular los z-scores de los peso (para ello se requiere calcular el promedio y desvio) y crear una columna que indique si es un outlier y luego reportar los que son outliers.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" title="1">terneros <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb137-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">z =</span> (Peso <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(Peso))<span class="op">/</span><span class="kw">sd</span>(Peso), <span class="dt">outlier =</span> <span class="kw">ifelse</span>(<span class="kw">abs</span>(z) <span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>, <span class="st">&quot;si&quot;</span>, <span class="st">&quot;no&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb137-3" title="3"><span class="st">  </span><span class="kw">filter</span>(outlier <span class="op">==</span><span class="st"> &quot;si&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb137-4" title="4"><span class="st">  </span><span class="kw">select</span>(IDV)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   IDV      
##   &lt;chr&gt;    
## 1 PO150A679</code></pre>
</div>
<div id="resmuir-datos" class="section level3">
<h3><span class="header-section-number">3.4.6</span> Resmuir datos</h3>
<p>Mediante <code>summarise()</code> se pueden aplicar funciones para resumir en un solo valor los valores de las columnas. Las funciones a aplicar deben devolver un único valor, por ejemplo <code>mean()</code>. Si usamos <code>summary()</code> esto devolverá 6 valores y dará error.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb139-1" title="1">terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb139-2" title="2"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">media =</span> <span class="kw">mean</span>(Peso), <span class="dt">sd =</span> <span class="kw">sd</span>(Peso), <span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">suma =</span> <span class="kw">sum</span>(Peso), <span class="dt">procedencias =</span> <span class="kw">n_distinct</span>(Procedencia))</a></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   media    sd     n   suma procedencias
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;        &lt;int&gt;
## 1  183.  37.2  1598 291882            7</code></pre>
<p>Nuevamente estos resultados pueden asignarse a otro objeto o bien encadenarse con otras operaciones.</p>
<p>Otro ejemplo, obtener la cantidad de terneros de cada procedencia</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb141-1" title="1">terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb141-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Procedencia) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb141-3" title="3"><span class="st">  </span><span class="kw">count</span>()</a></code></pre></div>
<pre><code>## # A tibble: 7 x 2
## # Groups:   Procedencia [7]
##   Procedencia        n
##   &lt;chr&gt;          &lt;int&gt;
## 1 Don Alberto       69
## 2 La Alameda       201
## 3 La Estrella      118
## 4 La Rosita         98
## 5 La Segunda        43
## 6 Las Glicinas     494
## 7 Los Corralitos   575</code></pre>
<p>Otro ejemplo más, cantidad de terneros de cada procedencia separados en mayor o menor a 200 kg</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb143-1" title="1">terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Procedencia, Peso <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb143-3" title="3"><span class="st">  </span><span class="kw">count</span>()</a></code></pre></div>
<pre><code>## # A tibble: 14 x 3
## # Groups:   Procedencia, Peso &gt; 200 [14]
##    Procedencia    `Peso &gt; 200`     n
##    &lt;chr&gt;          &lt;lgl&gt;        &lt;int&gt;
##  1 Don Alberto    FALSE           49
##  2 Don Alberto    TRUE            20
##  3 La Alameda     FALSE          136
##  4 La Alameda     TRUE            65
##  5 La Estrella    FALSE          112
##  6 La Estrella    TRUE             6
##  7 La Rosita      FALSE           89
##  8 La Rosita      TRUE             9
##  9 La Segunda     FALSE            5
## 10 La Segunda     TRUE            38
## 11 Las Glicinas   FALSE          428
## 12 Las Glicinas   TRUE            66
## 13 Los Corralitos FALSE          315
## 14 Los Corralitos TRUE           260</code></pre>
</div>
<div id="agrupar-ultimo-pero-no-menos-importante" class="section level3">
<h3><span class="header-section-number">3.4.7</span> Agrupar (último pero no menos importante)</h3>
<p>El verbo <code>group_by()</code> es muy útil para aplicar operaciones en subgrupos y presentar todo junto (<em>split-apply-combine</em>). Lo que hace es indicar que en el <code>data.frame</code> hay una o más variables que conforman los grupos. Luego cada operación se aplica a esos subgrupos.</p>
<p>Ejemplo: calcular media, desvio, n y suma para cada procedencia.</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb145-1" title="1">terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(Procedencia) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb145-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">media =</span> <span class="kw">mean</span>(Peso), <span class="dt">sd =</span> <span class="kw">sd</span>(Peso), <span class="dt">n =</span> <span class="kw">n</span>(), <span class="dt">suma =</span> <span class="kw">sum</span>(Peso))</a></code></pre></div>
<pre><code>## # A tibble: 7 x 5
##   Procedencia    media    sd     n   suma
##   &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;  &lt;dbl&gt;
## 1 Don Alberto     179.  26.9    69  12354
## 2 La Alameda      190.  39.5   201  38192
## 3 La Estrella     179.  14.2   118  21138
## 4 La Rosita       180.  17.4    98  17620
## 5 La Segunda      229.  24.8    43   9868
## 6 Las Glicinas    160.  33.7   494  79254
## 7 Los Corralitos  197.  35.8   575 113456</code></pre>
</div>
<div id="muestrear" class="section level3">
<h3><span class="header-section-number">3.4.8</span> Muestrear</h3>
<p>El verbo <code>sample_n()</code> and <code>sample_frac()</code> son útiles para tomar muestras aleatorias (con o sin reposición) de un conjunto de observaciones. También se puede hacer por subgrupo!</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb147-1" title="1"><span class="co"># Una muestra de 50 novillos</span></a>
<a class="sourceLine" id="cb147-2" title="2">muestra50 &lt;-<span class="st"> </span>terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb147-3" title="3"><span class="st">  </span><span class="kw">sample_n</span>(<span class="dv">50</span>)</a>
<a class="sourceLine" id="cb147-4" title="4">muestra50</a></code></pre></div>
<pre><code>## # A tibble: 50 x 6
##    IDV       Procedencia    Fecha                Peso log_peso peso2
##    &lt;chr&gt;     &lt;chr&gt;          &lt;dttm&gt;              &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 SZ208H927 Las Glicinas   2017-04-09 00:00:00   132     4.88 17424
##  2 TM603C884 La Rosita      2017-04-06 00:00:00   140     4.94 19600
##  3 PO150A802 Los Corralitos 2017-04-11 00:00:00   216     5.38 46656
##  4 NO133A023 Las Glicinas   2017-04-10 00:00:00   222     5.40 49284
##  5 MM429A720 La Alameda     2017-04-18 00:00:00   200     5.30 40000
##  6 SZ208H987 Las Glicinas   2017-04-10 00:00:00   140     4.94 19600
##  7 GH738B351 Don Alberto    2017-04-20 00:00:00   154     5.04 23716
##  8 SZ208I530 Las Glicinas   2017-04-10 00:00:00   114     4.74 12996
##  9 PO150A837 Los Corralitos 2017-04-11 00:00:00   166     5.11 27556
## 10 GT542A546 Las Glicinas   2017-04-09 00:00:00   180     5.19 32400
## # ... with 40 more rows</code></pre>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb149-1" title="1"><span class="co"># Una muestra de 10 novillos de cada procedencia</span></a>
<a class="sourceLine" id="cb149-2" title="2">muestra_procedencia &lt;-<span class="st"> </span>terneros <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb149-3" title="3"><span class="st">  </span><span class="kw">group_by</span>(Procedencia) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb149-4" title="4"><span class="st">  </span><span class="kw">sample_n</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb149-5" title="5">muestra_procedencia</a></code></pre></div>
<pre><code>## # A tibble: 70 x 6
## # Groups:   Procedencia [7]
##    IDV       Procedencia Fecha                Peso log_peso peso2
##    &lt;chr&gt;     &lt;chr&gt;       &lt;dttm&gt;              &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 GH738B390 Don Alberto 2017-04-20 00:00:00   206     5.33 42436
##  2 GH738B354 Don Alberto 2017-04-20 00:00:00   150     5.01 22500
##  3 GH738B365 Don Alberto 2017-04-20 00:00:00   164     5.10 26896
##  4 GH738B344 Don Alberto 2017-04-20 00:00:00   160     5.08 25600
##  5 GH738B340 Don Alberto 2017-04-20 00:00:00   204     5.32 41616
##  6 GH738B336 Don Alberto 2017-04-20 00:00:00   170     5.14 28900
##  7 GH738B388 Don Alberto 2017-04-20 00:00:00   210     5.35 44100
##  8 GH738B348 Don Alberto 2017-04-20 00:00:00   212     5.36 44944
##  9 GH738B334 Don Alberto 2017-04-20 00:00:00   164     5.10 26896
## 10 GH738B349 Don Alberto 2017-04-20 00:00:00   204     5.32 41616
## # ... with 60 more rows</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="aspectos-basicos-del-lenguaje-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="introduccion-a-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"highlight": "tango"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
